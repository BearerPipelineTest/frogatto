{
id: "particle_attache_slicer",
prototype: ["effects_attache"],
zorder: "@include data/zorder.cfg:near_player_foreground_effects",



properties: {
	child_systems: "
		map(
			range(child_system_count),
			object('particle_attache', x,y, {
				_particle_type: _particle_type,
				parent: me,
				time_to_die: 0,
				x:x, y:y,
		//		zorder: me.zorder,
			})
		)",

	active_child_systems: "[obj particle_attache] :: filter(me._effects_attaches, value is obj particle_attache)",

#-------------------------- effects_attache overrides --------------------------#
	do_setup: "execute(me, [
					initialize_position,
				])",


	
	turn_off: "map(active_child_systems, value.turn_off)",
	turn_on: "map(active_child_systems, value.turn_on)",

#-------------------------- vars --------------------------#
	_particle_type: {
		type: "string",
		dynamic_initialization: true,
	},

	child_system_count: {
		type: "int",
		default: 0,
		set: "[
			set(_data, value),

			remove_attaches_from_level(me)
			;
			map(child_systems, 'child', add_object(child))
		]",
	},


}



}
